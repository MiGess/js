<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factura</title><link rel="stylesheet" href="factura_estilo.css">
    
</head>
<body>
    <h1>
        Factura de compra
    </h1>
    <form id="formProducto">
        <input type="text" id="nombre" placeholder="Nombre del producto">
        <input type="number" id="precio" placeholder="Precio del producto">
        <input type="number" id="Cantidad" placeholder="Cantidad">
        <button type="button" onclick="agregarproducto()">Agregar</button>
    </form>
        <br>
        <table border="1" width="50%">
            <thead>
                <tr>
                    <th>producto</th>
                    <th>Precio</th>
                    <th>Cantidad</th>
                    <th>Subtotal</th>
                </tr>
                <tbody id="detalle"> </tbody>
            </thead>
        </table>
        <h3 id="totalFinal">Total:$0</h3>
        <script>
            let continuar = true; //variable de control del ciclo
            let total = 0; //acumulador del total
            function agregarproducto(){}
                while (continuar){
                //cpturar datos
                    let nombre = document.getElementById("nombre").value;
                    let precio = parseInt(document.getElementById("precio").value);
                    let cantidad = parseInt(document.getElementById("Cantidad").value);
                //validacion de datos
                    if (nombre === "" ||precio <= 0 || cantidad <= 0){
                        alert("Debe llenar todos los campos correctamente");
                        return; //salir de la funcion

                    }
                //calculo subtotalðŸ˜
                    let subtotal = precio * cantidad;
                    total += subtotal; //acumular el total, total = total + subtotal
                    // insertar datos en la tabla
                    let fila = `
                    <tr>
                        <td>${nombre}</td>
                        <td>${precio}</td>
                        <td>${cantidad}</td>
                        <td>${subtotal}</td>
                    </tr>
                    `;
                    document.getElementById("detalle").innerHTML += fila;
                    document.getElementById("formProducto").reset(); //limpiar formulario
                    document.getElementById("totalFinal").textContent = "Total:$" + total;
                    //preguntar si desea continuar
                    let respuesta = confirm("Â¿Desea agregar otro producto?");
                    if (respuesta === false || respuesta === null ){
                        continuar = false; //salir del ciclo
                }
                break
            }
        </script>
</body>

</html>